@page "/products/create"
@rendermode InteractiveServer

<h3>Add Product</h3>
 

<div class="mb-3">
    <label for="name" class="form-label">Name</label> 
    <input type="text" class="form-control mb-3" id="name" @bind="name" placeholder="Name" autocomplete="off"/>
</div>
<div class="mb-3">
    <label for="price" class="form-label">Price</label>  
    <input type="number" class="form-control mb-3" id="price" @bind="price" autocomplete="off"/>
</div> 
<button @onclick="SaveProduct" class="btn btn-primary">Save</button>

<NavLink href="/products" class="btn btn-secondary">Cancel</NavLink>

@code {
    [Inject] 
    private ProductStore store { get; set; } = default!;    

    [Inject] 
    private NavigationManager navigation { get; set; } = default!;

    private string? name;
    private decimal price;

   private void SaveProduct()
    {   
        // Create a new product explicitly with the values
        var newProduct = new Product
        {
            Id = Guid.NewGuid(),
            Name =name,
            Price = price
        }; 
          
        store.Add(newProduct); 
         
        navigation.NavigateTo("/products");
    } 
}